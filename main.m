%% Add Directory Tree to MATLAB Path

addpath(genpath('~/Repositories/WOGRSS'));
cd ~/Repositories/WOGRSS

%% Generate Input Parameter Object

run ./prm/californiaSample.m

%% Select Study Site

[p.hucId, p.hucIndex, p.gridMask, p.gridMaskGeoRasterRef ] = ...
    extractGridMaskFnc( ...
    p.hucCodeShapeStruct, ...
    p.overlayShapeStruct, ...
    p.gridDensity );

%% Generate Raster Mosaic Datasets

rawRasterMosaicData = extractRawRasterMosaicDataFnc( ...
    p.topLevelRasterDir, ...
    p.topLevelVectorDir, ...
    p.rasterNanFloors, ...
    p.gridDensity, ...
    p.attributeFieldCell, ...
    p.hucCodeShapeStruct, ...
    p.hucIndex, ...
    p.gridMask, ...
    p.gridMaskGeoRasterRef );

%% Visualize Combined Final Raster Mosaic Datasets

rasterMosaicDataPlot( ...
    rawRasterMosaicData, ...
    p.gridMask, ...
    p.gridMaskGeoRasterRef );

%% Reclassify the Slope Data Layer

categoricalDataFlag = 0;
breakCount = 5;
rasterMosaicInd = 1;

slopeRasterDataBreaks = rasterDataHist2BreaksFnc( ...
    rawRasterMosaicData{rasterMosaicInd,1}, ...
    categoricalDataFlag, ...
    breakCount, ...
    p.gridMask, ...
    p.gridMaskGeoRasterRef );

%% Execute Reclassify Operation

directionality = 'ascending';

slopeReclassRasterData = reclassifyRasterDataFnc( ...
    rawRasterMosaicData{5,1}, ...
    slopeRasterDataBreaks, ...
    directionality, ...
    p.gridMask );

    
    
