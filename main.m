%% Add Directory Tree to MATLAB Path

addpath(genpath('~/Repositories/WOGRSS'));
cd ~/Repositories/WOGRSS

%% Generate Input Parameter Object

run ./prm/californiaSample.m

%% Select Study Site

[p.hucID, p.hucIndex] = getHucCodeFnc( ...
    p.hucCodeShapeStruct, ...
    p.overlayShapeStruct);

%% Generate Grid Mask

[gridMask, gridMaskGeoRasterRef] = hucCode2GridMaskFnc( ...
    p.hucCodeShapeStruct, ...
    p.hucIndex, ...
    p.gridDensity);

%% Generate Raster Mosaic Datasets

rawRasterMosaicData = extractRawRasterMosaicDataFnc( ...
    p.topLevelRasterDir, ...
    p.topLevelVectorDir, ...
    p.rasterNanFloors, ...
    p.gridDensity, ...
    p.attributeFieldCell,...
    p.hucCodeShapeStruct, ...
    p.hucIndex, ...
    gridMask, ...
    gridMaskGeoRasterRef );

%% Visualize Combined Final Raster Mosaic Datasets

rasterMosaicDataPlot( ...
    rawRasterMosaicData, ...
    gridMask, ...
    gridMaskGeoRasterRef );
